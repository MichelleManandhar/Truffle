/*!
 * Remark (http://getbootstrapadmin.com/remark)
 * Copyright 2015 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function (document, window, $) {
    "use strict";
    var Site = window.Site;
    $(document).ready(function ($) {
        Site.run()
    }),
            function () {
                $(document).ready(function () {
                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                aoColumnDefs: [{
                                        bSortable: !1,
                                        aTargets: [-1]
                                    }],
                                iDisplayLength: 25,
                                aLengthMenu: [
                                    [25, 50, -1],
                                    [25, 50, "All"]
                                ],
                                dom: 'Bfrtip',
                                buttons: ['copyHtml5', 'excelHtml5', 'csvHtml5', 'pdfHtml5']
                            });
                    $(".with-export").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                bSort: false,
                                iDisplayLength: 10,
                                aLengthMenu: [
                                    [5, 10, 25, 50, -1],
                                    [5, 10, 25, 50, "All"]
                                ],
                                dom: 'Bfrtip',
                                buttons: ['copyHtml5', 'excelHtml5', 'csvHtml5', 'pdfHtml5']
                            });
                    $(".with-export-no-sort").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                bSort: false,
                                iDisplayLength: 10
                            });
                    $(".no-tools").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                // aoColumnDefs: [{
                                //         bSortable: !1,
                                //         aTargets: [-1]
                                //     }],
                                iDisplayLength: 10,
                                aLengthMenu: [
                                    [10, 25, 50, -1],
                                    [10, 25, 50, "All"]
                                ],
                                dom: 'Bfrtip',
                                buttons: ['copyHtml5', 'excelHtml5', 'csvHtml5', 'pdfHtml5'],
                                fnRowCallback : function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                                    initEditable(); 
                                }
                            });
                    $(".with-editable").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                aoColumnDefs: [{
                                        bSortable: !1,
                                        aTargets: [-1]
                                    }],
                                iDisplayLength: 10,
                                aLengthMenu: [
                                    [10, 25, 50, -1],
                                    [10, 25, 50, "All"]
                                ],
                                fnRowCallback : function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                                    initEditable(); 
                                }
                            });
                    $(".with-editable-no-tools").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                aoColumnDefs: [{
                                        bSortable: !1,
                                        aTargets: [-1]
                                    }],
                                bPaginate: false,
                                dom: 'Bfrtip',
                                buttons: ['copyHtml5', 'excelHtml5', 'csvHtml5', 'pdfHtml5'],
                                fnRowCallback : function (nRow, aData, iDisplayIndex, iDisplayIndexFull) {
                                    initEditable(); 
                                }
                            });
                    $(".with-editable-no-pagination").dataTable(options);

                    var defaults = $.components.getDefaults("dataTable"),
                            options = $.extend(!0, {}, defaults, {
                                bSort: false,
                                iDisplayLength: 10,
                                aLengthMenu: [
                                    [5, 10, 25, 50, -1],
                                    [5, 10, 25, 50, "All"]
                                ]
                            });
                    $(".with-report-export").dataTable(options);
                });
            }()

}(document, window, jQuery);

function initDataTableNoTools($table) {
    var defaults = $.components.getDefaults("dataTable"),
            options = $.extend(!0, {}, defaults, {
                bSort: false,
                iDisplayLength: 10
            });
    $table.dataTable(options);
}

function initDataTableWithExport($table) {
    var defaults = $.components.getDefaults("dataTable"),
            options = $.extend(!0, {}, defaults, {
                aoColumnDefs: [{
                        bSortable: !1,
                        aTargets: [-1]
                    }],
                iDisplayLength: 5,
                aLengthMenu: [
                    [25, 50, -1],
                    [25, 50, "All"]
                ],
                bDestroy: true,
                sDom: '<"dt-panelmenu clearfix"Tfr>t<"dt-panelfooter clearfix"ip>',
                oTableTools: {
                    sSwfPath: baseUrl + "/assets/plugins/datatables-tabletools/swf/copy_csv_xls_pdf.swf"
                }
            });
    $table.dataTable(options);
}

$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    var target_id = $(e.target).attr("href");
    var jqTable = $(target_id).find("table");
    var oTableTools = TableTools.fnGetInstance( jqTable[0] );
    if (oTableTools != null && oTableTools.fnResizeRequired()){
        /* A resize of TableTools' buttons and DataTables' columns is only required on the
         * first visible draw of the table
         */
        jqTable.dataTable().fnAdjustColumnSizing();
        oTableTools.fnResizeButtons();
    }
});

$(document).on("click", ".dataTable thead th", function () {
    var $tbody = $(this).parents('table').find('tbody');
    $tbody.find('tr').each(function(i, data) {
        $(this).find('td:first-child').html(i + 1);
    })
});